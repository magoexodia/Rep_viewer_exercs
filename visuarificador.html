<!DOCTYPE html>
<html>

    <head>
        <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
        <title>Lista de Imagens e Videos</title>
    </head>
    <style>
        body {
    background: rgba(255, 129, 129, 0.836);
    font-size: 3vmax;
}

button, input[type=text], input[type=number] {
    font-size: 4vmax;
}

input[type=number] {
    width: 3ch;
}

.lista img {
    height: 100%;
    width: auto;
}

.grande {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    z-index: 9999;
    display: none;
}

.grande.visivel {
    display: flex;
    justify-content: center;
    align-items: center;
}

#fechar {
    background-color: white;
    padding: 5px;
    border-radius: 50%;
    animation: pulse 2s infinite;
    position: fixed;
    right: 2ch;
    top: 2ch;
    cursor: pointer;
}

@keyframes pulse {
    0% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.1);
    }

    100% {
        transform: scale(1);
    }
}

#imagemGrande {
    width: 100%;
    height: 100%;
    margin: auto;
    transform-origin: top left;
    object-fit: contain;
}

.enlarged {
    max-width: 100%;
    min-height: 100%;
    object-fit: contain;
    position: fixed;
    top: 50%;
    bottom: 50%;
    left: 50%;
    right: 50%;
    transform: translate(-50%, -50%);
}

.lista {
    width: 100%;
    height: 15vh;
    display: flex;
    overflow-y: none;
    overflow-x: scroll;
}

.lista img:hover {
    opacity: 1;
}

.lista img:not(:hover) {
    opacity: 0.5;
}

#vd-container {
    display: flex;
    width: 100vw;
    height: 95vh;
}

#videoPlayer {
    width: 80%;
    height: calc(90vh - 2ch);
    object-fit: contain;
}

#videos {
    width: 18%;
    height: calc(90vh - 2ch);
    overflow-y: scroll;
}

.some, .some #p2, .some #videoPlayer, .some #videos {
    display: none;
}

#imgGrande {
    background: rgba(0, 0, 0, 0.5);
}


    </style>

    <body>
        <div id="im-container">
            <div id="p1">
                <input type="text" id="links" placeholder="üîóüéÜ, üîóüñºÔ∏è, üîóüé•,">
                <input type="number" id="quanto" min=2>
                <button onclick="start()">‚ûï</button>
            </div>
            <div id="p2" class="some">
                <button onclick="aV()">üé•‚ÜîÔ∏èüì∑</button>
                <button id="anterior">üîô</button>
                <button id="proximo">üîú</button>
                <button onclick="reseta()">üîÅ</button>
            </div>
            <div class="lista"></div>
            <div tabindex="0"> <img id="viewer" src="" style="width: calc(99vw - 2ch); height: 80vh; object-fit: contain;"></div>
            <div class="grande some" id="imgGrande">
                <img id="imagemGrande" src="">
            </div>
        </div>
        <div class="some" id="vd-container">
            <video id="videoPlayer" controls></video>
            <div id="videos"></div>
        </div>

        <script>
            let i = 0, t = 20, imgs = [], vids = [];

function cBF() {
    let bF = document.createElement('span');
    bF.id = 'fechar'; bF.textContent = 'X'; bF.onclick = fI;
    return bF;
}

function fI() {
    document.querySelector('.grande').classList.remove('visivel');
    document.getElementById('imagemGrande').style.transform = 'scale(1)';
}

document.onkeydown = function(e) { if (e.key === 'Escape') fI(); };

function eI(imgs) {
    let lista = document.querySelector(".lista");
    lista.innerHTML = '';
    for (let j = 0; j < t; j++) {
        let img = document.createElement("img"), imgI = (i + j) % imgs.length;
        img.src = imgs[imgI];
        img.onmouseover = function() {
            let viewer = document.getElementById('viewer');
            viewer.src = img.src; viewer.focus();
            viewer.onclick = function() {
                document.getElementById('imagemGrande').src = img.src;
                document.querySelector('.grande').classList.add('visivel');
            };
        };
        lista.appendChild(img);
    }
}

function start() {
    let q = document.getElementById("quanto").value;
    t = q ? q : 20;
    if (document.getElementById("links").value != "")  aL();
    let divG = document.querySelector('.grande');
    divG.appendChild(cBF());

    let imgG = document.getElementById('imagemGrande');
    imgG.onclick = function() {
        imgG.style.transform = imgG.style.transform === 'scale(3)' ? 'scale(1)' : 'scale(3)';
    };
}

function aL() {
    let links = document.getElementById("links").value.split(",");
    links.forEach(link => {
        link = link.trim().replace(/^['"]/, "").replace(/['"]$/, "");
        if (link) { 
            link.endsWith(".mp4") ? vids.push(link) : imgs.push(link);
        }
    });
    eI(imgs); eV(vids); muda();
}

function eV(vids) {
    let vP = document.getElementById("videoPlayer");
    let vD = document.getElementById("videos");
    vD.innerHTML = "";

    vids.forEach((v, k) => {
        let vB = document.createElement("button");
        vB.textContent = "üé•" + (k + 1);
        vB.onclick = () => vP.src = v;
        vD.appendChild(vB);
    });
}

let a = document.getElementById("anterior"), p = document.getElementById("proximo"), v = document.getElementById("viewer");

a.addEventListener("click", function() {
    i = (i - t < 0) ? imgs.length - t : i - t;
    eI(imgs);
});

p.addEventListener("click", function() {
    let nextMultiple = Math.ceil((i + 1) / t) * t;
    i = (nextMultiple >= imgs.length) ? 0 : nextMultiple;
    eI(imgs);
});

document.addEventListener("keydown", function(e) {
    if (e.key === "ArrowLeft") a.click();
    else if (e.key === "ArrowRight") p.click();
});

function aV() {
    document.getElementById("vd-container").classList.toggle("some");
    document.querySelector(".lista").classList.toggle("some");
    v.classList.toggle("some");
}

function muda() {
    document.getElementById("p1").classList.toggle("some");
    document.getElementById("p2").classList.toggle("some");
}

function mostra(txt) {
    document.getElementById("videos").innerHTML += txt;
}

function reseta() {
    document.querySelector(".lista").innerHTML = "";
    document.getElementById("videos").innerHTML = "";
    muda();
    document.getElementById("videoPlayer").src = "";
    imgs = [];
    vids = [];
    t = 20;
}



        </script>
    </body>

</html>
